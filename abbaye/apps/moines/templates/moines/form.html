{% extends 'moines/main_moines.html' %}

{% load static %}
{% load widget_tweaks %}

{% block css %}
    <link rel="stylesheet" href={% static 'main/tempusdominus/tempus-dominus.min.css' %}>
{% endblock css %}

{% block breadcrumbs %}
    <li class="breadcrumb-item"><a href={% url 'moines:list' %}>Moines</a></li>
    {% if monk %}
        <li class="breadcrumb-item"><a href={% url 'moines:details' monk.pk %}>{{ monk }}</a></li>
        <li class="breadcrumb-item active">Modifier</li>
    {% else %}
        <li class="breadcrumb-item active">Créer un nouveau moine</li>
    {% endif %}
{% endblock breadcrumbs %}

{% block content %}
    <form method="post" novalidate class="col-6">
        {% csrf_token %}

        <!-- Nom -->
        <div class="row justify-content-start ml-0">
            {{ form.name.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.name.errors %}
                        {% render_field form.name class="form-control is-invalid" %}
                        {% for error in form.name.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.name class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.name class="form-control" %}
                {% endif %}
                
                {% if form.name.help_text %}
                    <small class="form-text text-muted">
                        {{ form.name.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Date de naissance -->
        <div class="row justify-content-start ml-0">
            {{ form.birthday.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.birthday.errors %}
                        {% render_field form.birthday class="form-control is-invalid" %}
                        {% for error in form.birthday.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.birthday class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.birthday class="form-control" %}
                {% endif %}
                
                {% if form.birthday.help_text %}
                    <small class="form-text text-muted">
                        {{ form.birthday.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Entrée -->
        <div class="row justify-content-start ml-0">
            {{ form.entry.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.entry.errors %}
                        {% render_field form.entry class="form-control is-invalid" %}
                        {% for error in form.entry.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.entry class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.entry class="form-control" %}
                {% endif %}
                
                {% if form.entry.help_text %}
                    <small class="form-text text-muted">
                        {{ form.entry.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Rang -->
        <div class="row justify-content-start ml-0">
            {{ form.rank.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.rank.errors %}
                        {% render_field form.rank class="form-control is-invalid" %}
                        {% for error in form.rank.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.rank class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.rank class="form-control" %}
                {% endif %}
                
                {% if form.rank.help_text %}
                    <small class="form-text text-muted">
                        {{ form.rank.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Prise d'habit -->
        <div class="row justify-content-start ml-0">
            {{ form.habit.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.habit.errors %}
                        {% render_field form.habit class="form-control is-invalid" %}
                        {% for error in form.habit.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.habit class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.habit class="form-control" %}
                {% endif %}
                
                {% if form.habit.help_text %}
                    <small class="form-text text-muted">
                        {{ form.habit.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Profession temporaire -->
        <div class="row justify-content-start ml-0">
            {{ form.profession_temp.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.profession_temp.errors %}
                        {% render_field form.profession_temp class="form-control is-invalid" %}
                        {% for error in form.profession_temp.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.profession_temp class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.profession_temp class="form-control" %}
                {% endif %}
                
                {% if form.profession_temp.help_text %}
                    <small class="form-text text-muted">
                        {{ form.profession_temp.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Profession perpétuelle -->
        <div class="row justify-content-start ml-0">
            {{ form.profession_perp.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.profession_perp.errors %}
                        {% render_field form.profession_perp class="form-control is-invalid" %}
                        {% for error in form.profession_perp.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.profession_perp class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.profession_perp class="form-control" %}
                {% endif %}
                
                {% if form.profession_perp.help_text %}
                    <small class="form-text text-muted">
                        {{ form.profession_perp.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Priest -->
        <div class="row justify-content-start ml-0">
            {{ form.priest.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.priest.errors %}
                        {% render_field form.priest class="form-control is-invalid" %}
                        {% for error in form.priest.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.priest class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.priest class="form-control" %}
                {% endif %}
                
                {% if form.priest.help_text %}
                    <small class="form-text text-muted">
                        {{ form.priest.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Décès -->
        <div class="row justify-content-start ml-0">
            {{ form.death.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.death.errors %}
                        {% render_field form.death class="form-control is-invalid" %}
                        {% for error in form.death.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.death class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.death class="form-control" %}
                {% endif %}
                
                {% if form.death.help_text %}
                    <small class="form-text text-muted">
                        {{ form.death.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Email -->
        <div class="row justify-content-start ml-0">
            {{ form.email.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.email.errors %}
                        {% render_field form.email class="form-control is-invalid" %}
                        {% for error in form.email.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.email class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.email class="form-control" %}
                {% endif %}
                
                {% if form.email.help_text %}
                    <small class="form-text text-muted">
                        {{ form.email.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Additional email -->
        <div class="row justify-content-start ml-0">
            {{ form.additional_email.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.additional_email.errors %}
                        {% render_field form.additional_email class="form-control is-invalid" %}
                        {% for error in form.additional_email.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.additional_email class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.additional_email class="form-control" %}
                {% endif %}
                
                {% if form.additional_email.help_text %}
                    <small class="form-text text-muted">
                        {{ form.additional_email.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Is active -->
        <div class="row justify-content-start ml-0">
            {{ form.is_active.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.is_active.errors %}
                        {% render_field form.is_active class="form-control is-invalid" %}
                        {% for error in form.is_active.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.is_active class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.is_active class="form-control" %}
                {% endif %}
                
                {% if form.is_active.help_text %}
                    <small class="form-text text-muted">
                        {{ form.is_active.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Additional recipient -->
        <div class="row justify-content-start ml-0">
            {{ form.additional_recipient.label_tag }}

            <div class="form-group">
                {% if form.is_bound %}
                    {% if form.additional_recipient.errors %}
                        {% render_field form.additional_recipient class="form-control is-invalid" %}
                        {% for error in form.additional_recipient.errors %}
                            <div class="invalid-feedback" style="display: block;">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% else %}
                        {% render_field form.additional_recipient class="form-control is-valid" %}
                    {% endif %}
                {% else %}
                    {% render_field form.additional_recipient class="form-control" %}
                {% endif %}
                
                {% if form.additional_recipient.help_text %}
                    <small class="form-text text-muted">
                        {{ form.additional_recipient.help_text }}
                    </small>
                {% endif %}
            </div>
        </div>

        <!-- Validation -->
        <div class="d-flex justify-content-center mt-5">
            {% if monk %}
                <a href={% url 'moines:details' monk.pk %} class="btn btn-primary mx-3">Annuler</a>
            {% else %}
                <a href={% url 'moines:list' %} class="btn btn-primary mx-3">Annuler</a>
            {% endif %}
            <button type="submit" class="btn btn-success mx-3">Valider</button>
        </div>
    </form>
{% endblock content %}

{% block javascript %}
    <script src={% static 'main/js/popper.min.js' %}></script>
    <script src={% static 'main/tempusdominus/tempus-dominus.min.js' %}></script>
    <script src={% static 'moines/js/tempusdominus_monks.js' %}></script>
{% endblock javascript %}
